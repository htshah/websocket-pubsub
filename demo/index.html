<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-148986426-2"
    ></script>
    <script type="text/javascript">
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'UA-148986426-2');
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <h3>Open console of the browser</h3>

    <script type="text/javascript" src="../dist/websocket-pubsub.js"></script>
    <script type="text/javascript" src="/websocket-pubsub.js"></script>

    <script type="text/javascript">
      var url = 'wss://echo.websocket.org';
      // var url = 'ws://localhost:8000';
      var websocket = new WebsocketPubSub(url);

      var key = websocket.subscribe('ch1', function(data) {
        console.log('Fn1: ' + data);
      });

      websocket.subscribe('ch1', function(data) {
        console.log('Fn2: ' + data);
      });

      websocket.emit('ch1', 'hello world1');
      websocket.emit('ch1', 'hello world2');

      setTimeout(function() {
        websocket.unsubscribe(key);
      }, 5000);
    </script>
  </body>
</html>
